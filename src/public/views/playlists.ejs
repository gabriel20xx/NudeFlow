<%- include("partials/header") %>
<main id="playlists-container" class="page-wrapper" aria-label="Your playlists">
  <div id="pl-auth-guard" style="display:none;align-items:center;justify-content:center;min-height:calc(100vh - (var(--topbar-height) + var(--bottom-nav-height)));padding-top:var(--topbar-height);padding-bottom:var(--bottom-nav-height);">
    <!-- Inline auth guard (shared partial omitted due to shim stripping).
      Centering strategy: outer #pl-auth-guard gets display:flex only when unauth (JS sets display:flex),
      inner container (#pl-auth-guard-inner) declares display:flex with ordered properties so tests can
      regex match for display:flex;align-items:center;justify-content:center;flex-direction:column.
      Ordering matters for the focused centering test; keep display + alignment tokens in this order. -->
    <div id="pl-auth-guard-inner" class="auth-guard flex-center" role="region" aria-label="Authentication required" aria-describedby="plAuthMsg" style="display:flex;align-items:center;justify-content:center;flex-direction:column;gap:1rem;">
      <p id="plAuthMsg" class="auth-guard-msg" style="font-size:1rem;color:var(--color-text-dim);text-align:center;">You must be logged in to manage playlists.</p>
      <button id="plLoginLink" type="button" class="auth-btn" aria-describedby="plAuthMsg">Log In / Sign Up</button>
    </div>
  </div>
  <div id="pl-content">
    <div id="pl-create" style="margin: 14px auto; display: flex; gap: 10px; align-items:center; justify-content:center; max-width: 600px; padding: 0 16px;">
      <input id="pl-name" type="text" class="field-input" placeholder="New playlist name" style="flex:1;" />
      <button id="pl-create-btn" type="button" class="btn btn-success-solid">Create</button>
    </div>
    <div id="playlistsGrid" class="results-grid" aria-live="polite"></div>
    <div id="pl-empty" class="empty-state" style="display:none; padding: 24px; text-align:center; opacity:0.8;">No playlists yet.</div>
    <div id="pl-error" class="empty-state" style="display:none; padding: 24px; text-align:center; color: var(--color-danger);">Failed to load playlists.</div>
  </div>
  <script src="/js/playlists.js"></script>
</main>
<%- include("partials/navbar") %>
