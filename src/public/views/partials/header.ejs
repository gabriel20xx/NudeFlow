<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<title>NudeFlow - <%= title %></title>
	<meta name="theme-color" content="#ff9800" />
	<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<script defer src="/js/config.js"></script>
	<script defer src="/js/dropdown.js"></script>
	<script defer src="/js/loading.js"></script>
</head>
<body>
<div class="body-container">
	<header class="app-topbar" role="banner">
	  <a href="/" class="app-logo" aria-label="Go to home feed">NudeFlow</a>
	  <div class="app-topbar-center">
		<div class="app-category-select" aria-label="Select category">
			<select id="dropdown" class="ui-select" name="category" aria-label="Categories" onchange="redirectToOption()">
				<option value="">All Categories</option>
			</select>
		</div>
	  </div>
	  <div class="theme-toggle">
		<button type="button" id="themeToggleBtn" class="theme-toggle-btn" aria-label="Toggle theme" title="Toggle dark / light theme">🌙</button>
	  </div>
	</header>
	<script>
		(function(){
			const root = document.documentElement;
			const storageKey = 'app-theme-preference';
			function applyTheme(t){ if(!t) return; root.setAttribute('data-theme', t); const btn=document.getElementById('themeToggleBtn'); if(btn) btn.textContent = t==='dark'?'🌙':'☀️'; }
			function cycle(){ const current = root.getAttribute('data-theme') || (matchMedia('(prefers-color-scheme: light)').matches?'light':'dark'); const next = current==='dark'?'light':'dark'; localStorage.setItem(storageKey,next); applyTheme(next); }
			const stored = localStorage.getItem(storageKey);
			if(stored){ applyTheme(stored); } else { applyTheme(matchMedia('(prefers-color-scheme: light)').matches?'light':'dark'); }
			document.addEventListener('DOMContentLoaded',()=>{ const btn=document.getElementById('themeToggleBtn'); if(btn) btn.addEventListener('click',cycle); });
			matchMedia('(prefers-color-scheme: dark)').addEventListener('change',e=>{ if(!localStorage.getItem(storageKey)) applyTheme(e.matches?'dark':'light'); });
		})();
	</script>
